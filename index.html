<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Chess | Premium Edition</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0a0a0a;
            color: #00d4ff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        h2 {
            font-size: 2.5rem;
            letter-spacing: 8px;
            text-shadow: 0 0 15px #00d4ff;
            margin-bottom: 10px;
            text-transform: uppercase;
        }

        /* Essential for visibility: High-contrast piece styling */
        .piece-417db {
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.9)) brightness(1.1);
            transition: transform 0.2s ease;
            cursor: grab;
        }

        .piece-417db:active { cursor: grabbing; }

        /* Board Styling */
        #board { 
            width: 480px; 
            border: 5px solid #00d4ff;
            box-shadow: 0 0 25px rgba(0, 212, 255, 0.4);
            border-radius: 4px;
        }

        /* Custom Square Colors for clarity */
        .white-1e1d7 { background-color: #1a2a33 !important; } /* Dark Blue-Grey */
        .black-3c85d { background-color: #050505 !important; } /* Deep Black */

        /* Coordinate labels */
        .notation-322f9 {
            color: #00d4ff !important;
            font-weight: bold;
        }

        /* Controls & Status */
        .controls { margin: 20px 0; }
        button {
            padding: 10px 20px;
            background: transparent;
            border: 2px solid #00d4ff;
            color: #00d4ff;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            margin: 0 5px;
            transition: 0.3s;
        }

        button:hover {
            background: #00d4ff;
            color: #000;
            box-shadow: 0 0 15px #00d4ff;
        }

        .status-box {
            background: rgba(0, 212, 255, 0.1);
            padding: 10px 30px;
            border-radius: 20px;
            border: 1px solid #00d4ff;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .footer {
            margin-top: 30px;
            font-size: 0.9rem;
            opacity: 0.7;
        }
    </style>
</head>
<body>

    <h2>NEON CHESS</h2>
    
    <div class="status-box" id="status">SYSTEM READY</div>

    <div class="controls">
        <button onclick="setMode('pvp')">Player vs Player</button>
        <button onclick="setMode('pva')">vs Computer (AI)</button>
        <button onclick="resetGame()">Reset Board</button>
    </div>

    <div id="board"></div>

    <div class="footer">
        GAME DEVELOPED BY @SNOWMAN YT
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>

    <script>
        var board = null;
        var game = new Chess();
        var $status = $('#status');
        var mode = 'pva';

        function onDragStart (source, piece, position, orientation) {
            if (game.game_over()) return false;
            // Prevent playing as the wrong color
            if ((mode === 'pva' && piece.search(/^b/) !== -1) ||
                (game.turn() === 'w' && piece.search(/^b/) !== -1) ||
                (game.turn() === 'b' && piece.search(/^w/) !== -1)) {
                return false;
            }
        }

        function makeRandomMove () {
            var possibleMoves = game.moves();
            if (possibleMoves.length === 0) return;
            var randomIdx = Math.floor(Math.random() * possibleMoves.length);
            game.move(possibleMoves[randomIdx]);
            board.position(game.fen());
            updateStatus();
        }

        function onDrop (source, target) {
            var move = game.move({
                from: source,
                to: target,
                promotion: 'q' 
            });

            if (move === null) return 'snapback';

            updateStatus();

            if (mode === 'pva' && !game.game_over()) {
                window.setTimeout(makeRandomMove, 600);
            }
        }

        function onSnapEnd () {
            board.position(game.fen());
        }

        function updateStatus () {
            var status = '';
            var moveColor = (game.turn() === 'b') ? 'Black' : 'White';

            if (game.in_checkmate()) {
                status = 'GAME OVER: ' + moveColor + ' is in Checkmate.';
            } else if (game.in_draw()) {
                status = 'GAME OVER: Draw';
            } else {
                status = moveColor + "'s Turn";
                if (game.in_check()) { status += ' (CHECK!)'; }
            }
            $status.text(status);
        }

        function setMode(newMode) {
            mode = newMode;
            resetGame();
            $status.text(mode === 'pva' ? "VS AI ENABLED" : "PVP ENABLED");
        }

        function resetGame() {
            game.reset();
            board.start();
            updateStatus();
        }

        var config = {
            draggable: true,
            position: 'start',
            onDragStart: onDragStart,
            onDrop: onDrop,
            onSnapEnd: onSnapEnd,
            pieceTheme: 'https://chessboardjs.com/img/chesspieces/wikipedia/{piece}.png'
        };
        
        board = Chessboard('board', config);
        updateStatus();
    </script>
</body>
</html>